<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>स्क्रोलिंग इमेज गैलरी</title>
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    
    <style>
        /* CSS Variables for easier theme changes */
        :root {
            --primary-color: #ff4500; /* Deep Orange */
            --bg-color: #f0f8ff; /* Azure White */
            --card-bg: #ffffff;
            --like-color: #28a745; /* Green for Like */
            --unlike-color: #dc3545; /* Red for Unlike/Delete */
            --download-color: #007bff; /* Blue */
            --whatsapp-color: #25d366; /* WhatsApp Green */
        }

        body {
            font-family: 'Inter', Arial, sans-serif;
            background-color: var(--bg-color);
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            /* Scroll view के लिए min-height हटा दिया गया */
            box-sizing: border-box; 
        }
        
        /* मुख्य स्क्रॉलिंग कंटेनर */
        .main-gallery {
            width: 100%;
            max-width: 550px; /* अधिकतम चौड़ाई */
            padding: 10px;
        }

        .card-container {
            text-align: center;
            background-color: var(--card-bg);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px; /* कार्ड के बीच गैप */
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.3em; 
            padding: 0 10px;
        }

        /* --- Image Responsiveness --- */
        .image-card {
            border: 3px solid var(--primary-color);
            border-radius: 8px;
            overflow: hidden; 
            margin-bottom: 15px;
        }
        
        .image-card img {
            width: 100%; 
            height: auto; 
            max-height: 400px; 
            display: block; 
            object-fit: cover; 
        }

        /* --- Action Buttons Row --- */
        .action-row {
            display: flex;
            gap: 8px; 
            justify-content: space-between; /* बटनों के बीच समान स्थान */
        }

        .action-btn {
            padding: 10px 5px; /* पैडिंग कम की ताकि छोटे स्क्रीन पर फिट हो जाए */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px; 
            font-weight: bold;
            transition: background-color 0.3s, transform 0.1s;
            flex-grow: 1; /* बटनों को समान रूप से फैलने दें */
            min-width: 0; /* बहुत छोटी स्क्रीन पर सिकुड़ने दें */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            white-space: nowrap; /* सुनिश्चित करें कि टेक्स्ट एक लाइन में रहे */
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        /* Individual Button Styling */
        .like-btn {
            background-color: var(--like-color);
            color: white;
        }
        .like-btn.liked { 
            background-color: var(--unlike-color);
        }

        .download-btn {
            background-color: var(--download-color);
            color: white;
        }

        .whatsapp-btn {
            background-color: var(--whatsapp-color);
            color: white;
        }

        .action-btn i {
            margin-right: 5px;
        }
        
        /* छोटी स्क्रीन पर आइकॉन को बड़ा करें और टेक्स्ट को छोटा करें यदि आवश्यक हो */
        @media (max-width: 400px) {
            .action-btn {
                font-size: 12px;
                padding: 10px 3px;
            }
        }
    </style>
</head>
<body>
    <div class="main-gallery" id="galleryContainer">
        <!-- Content will be injected here by JavaScript -->
    </div>

    <script>
        // सभी सामग्री की लिस्ट (आपका दिया हुआ डेटा)
        const contentItems = [
            { 
                title: "जय श्री राम | जय हनुमान ज्ञान गुन सागर", 
                url: "https://m.media-amazon.com/images/I/61EzFcUUW5L._SL1200_.jpg", 
                shareText: "जय श्री राम! श्री हनुमान जी की यह सुंदर छवि देखें।" 
            },
            { 
                title: "समुंदर की लहरें", 
                url: "https://plus.unsplash.com/premium_photo-1683910767554-7508927ef89f?q=80&w=808&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", 
                shareText: "वाह! समुंदर की लहरों का सुंदर दृश्य।" 
            },
            { 
                title: "सूरजमुखी की खुशबू", 
                url: "https://images.unsplash.com/photo-1626808642875-0aa545482dfb?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D", 
                shareText: "सूरजमुखी की खुशबू वाला खूबसूरत दिन।" 
            }
        ];
        
        const galleryContainer = document.getElementById('galleryContainer');

        // --- 1. UI अपडेट फ़ंक्शन ---
        // यह फ़ंक्शन विशिष्ट बटन को अपडेट करता है
        function updateLikeUI(likeBtn, isLiked) {
            if (isLiked) {
                likeBtn.innerHTML = `<i class="fas fa-heart"></i> अनलाइक`; 
                likeBtn.classList.add('liked'); 
            } else {
                likeBtn.innerHTML = `<i class="fas fa-thumbs-up"></i> लाइक करें`;
                likeBtn.classList.remove('liked'); 
            }
        }
        
        // --- 2. लाइक हैंडलर फ़ंक्शन ---
        function handleLikeClick(event, itemUrl) {
            const likeBtn = event.currentTarget;
            
            // वर्तमान स्थिति को टॉगल करें (UI से क्लास चेक करें)
            let isLiked = likeBtn.classList.contains('liked');
            isLiked = !isLiked; // नई स्थिति
            
            updateLikeUI(likeBtn, isLiked);
            
            // Kotlin को वर्तमान URL और नई स्थिति सेव करने के लिए भेजें
            if (typeof AndroidInterface !== 'undefined' && AndroidInterface.saveLikeState) {
                AndroidInterface.saveLikeState(itemUrl, isLiked);
            }
        }

        // --- 3. डाउनलोड हैंडलर फ़ंक्शन ---
        function handleDownloadClick(item) {
            const imageUrl = item.url; 
            if (typeof AndroidInterface !== 'undefined' && AndroidInterface.downloadImage) {
                AndroidInterface.downloadImage(imageUrl);
            } else {
                // Fallback
                const link = document.createElement('a');
                link.href = imageUrl;
                link.download = item.title.replace(/[^a-z0-9]/gi, '_') + '.jpg'; 
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            }
        }

        // --- 4. WhatsApp शेयर हैंडलर फ़ंक्शन ---
        function handleShareClick(item) {
            const shareText = item.shareText;
            const imageUrl = item.url; 
            
            if (typeof AndroidInterface !== 'undefined' && AndroidInterface.shareImageAndText) {
                AndroidInterface.shareImageAndText(shareText, imageUrl);
            } else {
                // Fallback
                const finalShareText = encodeURIComponent(shareText);
                window.location.href = `https://api.whatsapp.com/send?text=${finalShareText}`;
            }
        }


        // --- 5. मुख्य रेंडरिंग फ़ंक्शन ---
        function renderGallery() {
            // गैलरी को साफ़ करें
            galleryContainer.innerHTML = ''; 

            contentItems.forEach(item => {
                const card = document.createElement('div');
                card.className = 'card-container';
                
                // --- 1. शीर्षक ---
                const title = document.createElement('h2');
                title.textContent = item.title;

                // --- 2. इमेज ---
                const imageCard = document.createElement('div');
                imageCard.className = 'image-card';
                const img = document.createElement('img');
                img.src = item.url;
                img.alt = item.title;
                imageCard.appendChild(img);

                // --- 3. बटन पंक्ति ---
                const actionRow = document.createElement('div');
                actionRow.className = 'action-row';

                // a. लाइक बटन
                const likeBtn = document.createElement('button');
                likeBtn.className = 'action-btn like-btn';
                
                // Kotlin से लाइक की स्थिति लोड करें (सिंक्रोनस, क्योंकि यह DOMContentLoaded के बाद चलता है)
                let isLiked = false;
                if (typeof AndroidInterface !== 'undefined' && AndroidInterface.getIsLiked) {
                    isLiked = AndroidInterface.getIsLiked(item.url); 
                }
                updateLikeUI(likeBtn, isLiked);
                
                // इवेंट लिसनर
                likeBtn.addEventListener('click', (e) => handleLikeClick(e, item.url));


                // b. डाउनलोड बटन
                const downloadBtn = document.createElement('button');
                downloadBtn.className = 'action-btn download-btn';
                downloadBtn.innerHTML = `<i class="fas fa-download"></i> डाउनलोड`;
                downloadBtn.addEventListener('click', () => handleDownloadClick(item));


                // c. WhatsApp शेयर बटन
                const whatsappShareBtn = document.createElement('button');
                whatsappShareBtn.className = 'action-btn whatsapp-btn';
                whatsappShareBtn.innerHTML = `<i class="fab fa-whatsapp"></i> शेयर`;
                whatsappShareBtn.addEventListener('click', () => handleShareClick(item));

                
                // बटनों को पंक्ति में जोड़ें
                actionRow.appendChild(likeBtn);
                actionRow.appendChild(downloadBtn);
                actionRow.appendChild(whatsappShareBtn);


                // कार्ड में सब कुछ जोड़ें
                card.appendChild(title);
                card.appendChild(imageCard);
                card.appendChild(actionRow);
                
                // गैलरी कंटेनर में कार्ड जोड़ें
                galleryContainer.appendChild(card);
            });
        }

        // पेज लोड होने पर गैलरी रेंडर करें
        document.addEventListener('DOMContentLoaded', renderGallery);
    </script>
</body>
</html>
